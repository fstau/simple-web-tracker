function uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(c){var r=16*Math.random()|0,v;return("x"==c?r:3&r|8).toString(16)}))}function getCookie(cname){for(var name=cname+"=",decodedCookie,ca=decodeURIComponent(document.cookie).split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return null}function setCookie(cname,cvalue,exdays){var d=new Date;d.setTime(d.getTime()+24*exdays*60*60*1e3);var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/"}function getLocalStorage(key){return window.localStorage.getItem(key)}function setLocalStorage(key,value){return window.localStorage.setItem(key,value)}function getSessionStorage(key){return window.sessionStorage.getItem(key)}function setSessionStorage(key,value){return window.sessionStorage.setItem(key,value)}function getUserPreferences(){const settings=JSON.parse(getLocalStorage("swt_preferences"));return settings}function setUserPreferences(track,user,session){const settings={track:track,preferences:{attribution:{user:user,session:session},events:{pageviews:!0,scrollpoints:!0,clicks:!0,custom:!0}}};setLocalStorage("swt_preferences",JSON.stringify(settings))}function openConsentModal(){const modal=document.querySelector("#consent_modal");modal.style.display="block"}function closeConsentModal(){const modal=document.querySelector("#consent_modal");modal.style.display="none"}function trackEvent(baseUri,user,session,event,page,query,data){fetch(`${baseUri}/v1/track`,{method:"POST",body:JSON.stringify({cts:(new Date).getTime(),u:user,s:session,e:event,p:page,q:query,d:data})}).catch(console.error)}function trackUser(baseUri,user){fetch(`${baseUri}/v1/users`,{method:"POST",body:JSON.stringify({cts:(new Date).getTime(),u:user,ww:window.screen.width,wh:window.screen.height,waw:window.screen.availWidth,wah:window.screen.availHeight,o:window.screen.orientation.type})}).catch(console.error)}function getTracker(baseUri){const settings=getUserPreferences(),tracker={baseUri:baseUri,settings:settings,initSettings:function(){this.track=this.settings.track,this.eventPreferences=this.settings.preferences.events},initIdentity:function(){let user=getCookie("swt_user");!user&&this.settings.track&&this.settings.preferences.attribution.user&&(user=uuidv4(),setCookie("swt_user",user),trackUser(this.baseUri,user)),user||(user="anonymous"),this.user=user;let session=getSessionStorage("swt_session");!session&&this.settings.track&&this.settings.preferences.attribution.session&&(session=uuidv4(),setSessionStorage("swt_session",session)),session||(session="anonymous"),this.session=session},init:function(){this.initSettings(),this.initIdentity()},trackPageView:function(page){const query=window.location.search;let p=window.location.pathname;page&&(p=page),this.track&&this.eventPreferences.pageviews&&trackEvent(this.baseUri,this.user,this.session,"pageview",p,query)},trackClick:function(data){const query=window.location.search,page=window.location.pathname;this.track&&this.eventPreferences.clicks&&trackEvent(this.baseUri,this.user,this.session,"click",page,query,data)},updateTracker:function(track,user,session){setUserPreferences(track,user,session),this.settings=getUserPreferences(),this.init()}};return tracker.settings?(tracker.init(),tracker):(openConsentModal(),tracker)}