function uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(c){var r=16*Math.random()|0,v;return("x"==c?r:3&r|8).toString(16)}))}function getCookie(cname){for(var name=cname+"=",decodedCookie,ca=decodeURIComponent(document.cookie).split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return null}function setCookie(cname,cvalue,exdays){var d=new Date;d.setTime(d.getTime()+24*exdays*60*60*1e3);var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/"}function getLocalStorage(key){return window.localStorage.getItem(key)}function setLocalStorage(key,value){return window.localStorage.setItem(key,value)}function getSessionStorage(key){return window.sessionStorage.getItem(key)}function setSessionStorage(key,value){return window.sessionStorage.setItem(key,value)}function getUserPreferences(){const settings=JSON.parse(getLocalStorage("swt_preferences"));return settings}function setUserPreferences(track){const settings={track:track,preferences:{attribution:{user:!0,session:!0},events:{pageviews:!0,scrollpoints:!0,clicks:!0,custom:!0}}};setLocalStorage("swt_preferences",JSON.stringify(settings))}function openConsentModal(){const modal=document.querySelector("#consent_modal");modal.style.display="block"}function closeConsentModal(){const modal=document.querySelector("#consent_modal");modal.style.display="none"}function trackPageView(baseUri,user,session){fetch(`${baseUri}/v1/tracking/pageview?cts=${Date.now()}&u=${user}&s=${session}`).catch(console.error)}function getTracker(){const settings=getUserPreferences();let tracker={baseUri:"http://localhost:5000",settings:settings,initSettings:function(){this.track=this.settings.track,this.eventPreferences=this.settings.preferences.events},initIdentity:function(){let user=getCookie("swt_user");!user&&this.settings.track&&this.settings.preferences.attribution.user&&(user=uuidv4(),setCookie("swt_user",user)),user||(user="anonymous"),this.user=user;let session=getSessionStorage("swt_session");!session&&this.settings.track&&this.settings.preferences.attribution.session&&(session=uuidv4(),setSessionStorage("swt_session",session)),this.session||(session="anonymous"),this.session=session},init:function(){this.initSettings(),this.initIdentity()},trackPageView:function(){this.track&&this.eventPreferences.pageviews&&trackPageView(this.baseUri,this.user,this.session)},updateTracker:function(track){setUserPreferences(track),this.settings=getUserPreferences(),this.init()}};return tracker.settings?(tracker.init(),tracker):(openConsentModal(),tracker)}function initTracker(baseUri,cname,allowTracker){let tracker={initUser:function(){getCookie(cname)?setCookie(cname,"",0):"true"==getLocalStorage(allowTracker)?setCookie(cname,uuidv4(),90):setCookie(cname,"",0)},trackCustom:function(e,d){fetch(`${baseUri}/v1/tracking/custom?cts=${Date.now()}&e=${e}&d=${d}&uid=${getCookie(cname)}`).then(r=>r.text())},trackPageView:function(d){fetch(`${baseUri}/v1/tracking/pageview?cts=${Date.now()}&d=${d}&uid=${getCookie(cname)}`).then(r=>r.text())},trackClick:function(d){fetch(`${baseUri}/v1/tracking/click?cts=${Date.now()}&d=${d}&uid=${getCookie(cname)}`).then(r=>r.text())},registerUser:function(){fetch(`${baseUri}/v1/users/register?cts=${Date.now()}&uid=${getCookie(cname)}&ww=${window.screen.width}&wh=${window.screen.height}&waw=${window.screen.availWidth}&wah=${window.screen.availHeight}&o=${window.screen.orientation.type}`).then(r=>r.text())},initUserWithPageView:function(d){tracker.initUser(),tracker.trackPageView(d)}};return tracker.initUser(),tracker}